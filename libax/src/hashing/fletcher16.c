// ***************************************************************************
// TITLE
//      32-bit Fletcher Checksums Calculation
// PROJECT
//      Arsenal Library/Library/Hashing
// ***************************************************************************
//
// FILE
//      $Id:$
// HISTORY
//      $Log:$
// ***************************************************************************

#include<arsenal.h>


// ---------------------------------------------------------------------------
// ------------------------------ FUNCTIONS ----------------------------------
// ---------------------------------------------------------------------------

// ***************************************************************************
// FUNCTION
//      fletcher16_calc
// PURPOSE
//
// PARAMETERS
//      PVOID data  --
//      INT   count --
// RESULT
//      U16 --
// ***************************************************************************
U16 fletcher16_calc(PVOID   data,
                    INT     count)

{
    PU8         on      = (PU8)data;
    U16         sum1    = 0;
    U16         sum2    = 0;
    int         index;

    for( index = 0; index < count; ++index )
    {
        sum1 = (sum1 + on[index]) % 255;
        sum2 = (sum2 + sum1) % 255;
    }

   return (sum2 << 8) | sum1;
}

